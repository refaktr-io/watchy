---
name: Deployment Issue
description: Report a deployment or infrastructure problem
title: "[DEPLOY] "
labels: ["deployment", "bug"]
assignees: []
body:
  - type: markdown
    attributes:
      value: |
        ## Deployment Issue Report

        Thank you for reporting a deployment issue. Please provide as much
        detail as possible to help us resolve the problem quickly.

  - type: textarea
    id: problem-description
    attributes:
      label: Problem Description
      description: A clear description of what went wrong during deployment
      placeholder: Describe the deployment issue you encountered
    validations:
      required: true

  - type: input
    id: workflow-name
    attributes:
      label: GitHub Actions Workflow
      description: Name of the workflow that failed
      placeholder: e.g., Optimized Watchy Platform CI/CD
    validations:
      required: true

  - type: input
    id: run-url
    attributes:
      label: GitHub Actions Run URL
      description: Link to the failed GitHub Actions run
      placeholder: https://github.com/cloudbennett/watchy.cloud/actions/runs/...

  - type: dropdown
    id: environment
    attributes:
      label: Environment
      description: Which environment was being deployed to?
      options:
        - staging
        - production
    validations:
      required: true

  - type: dropdown
    id: trigger
    attributes:
      label: Triggered by
      description: How was the deployment triggered?
      options:
        - Push to main branch
        - Manual workflow dispatch
        - Pull request
        - Other
    validations:
      required: true

  - type: textarea
    id: error-logs
    attributes:
      label: Error Details
      description: Paste error logs from GitHub Actions here
      placeholder: |
        [Paste complete error logs here]
      render: shell
    validations:
      required: true

  - type: textarea
    id: expected-behavior
    attributes:
      label: Expected Behavior
      description: What should have happened during deployment?
      placeholder: Describe what you expected to happen

  - type: textarea
    id: steps-to-reproduce
    attributes:
      label: Steps to Reproduce
      description: How can we reproduce this issue?
      placeholder: |
        1. Go to GitHub Actions
        2. Trigger workflow with '...'
        3. See error at step '...'

  - type: input
    id: branch
    attributes:
      label: Branch
      description: Which branch was being deployed?
      placeholder: e.g., main
    validations:
      required: true

  - type: input
    id: commit-sha
    attributes:
      label: Commit SHA
      description: Commit hash if known
      placeholder: e.g., abc123def456

  - type: checkboxes
    id: aws-resources
    attributes:
      label: AWS Resources Affected
      description: Which AWS resources are experiencing issues?
      options:
        - label: CloudFormation stacks
        - label: S3 buckets
        - label: Lambda functions
        - label: CloudFront distributions
        - label: Binary distribution
        - label: Website hosting
        - label: WAF rules

  - type: textarea
    id: additional-context
    attributes:
      label: Additional Context
      description: Any additional information about the deployment issue
      placeholder: Add any other context about the problem here
